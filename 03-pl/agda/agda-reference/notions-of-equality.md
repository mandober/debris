# Notions of equality

https://ncatlab.org/nlab/show/equality

Different kinds of equality
  - axiomatic vs defined
  - identity vs equality
  - propositional vs definitional (judgemental)
  - intensional vs extensional
  - equality judgements vs equality propositions
  - equality vs isomorphism
  - equality vs equivalence

* Identity types
https://ncatlab.org/nlab/show/identity+type


## Different kinds of equality

Here is a list of distinctions between different notions of equality, in different contexts, where possibly all the following pairs of notions are, in turn, "the same", just expressed in terms of different terminologies:
- the difference between axiomatic and defined equality
- the difference between identity and equality
- the difference between intensional and extensional equality
- the difference between equality judgements and equality propositions
- the difference between equality and isomorphism
- the difference between equality and equivalence
- the possibility of operations that might not preserve equality

## In type theory

In a formal language such as type theory, one distinguishes various different notions of equality or equivalence of the terms of the language.

Note that both intensional and extensional type theories may distinguish between intensional and extensional equality (and whether the type theory satisfies function extensionality is yet a separate issue).

## Definitional equality

The most basic one is definitional equality or intensional equality.

**Definitional equality** is intensional equality or equality of meaning (synonymy). It is a relation between linguistic expressions. Definitional equality is the equivalence relation generated by abbreviatory definitions, changes of bound variables and the principle of substituting equals for equals. Definitional equality can be used to rewrite expressions. For instance the symbols `2` and `SS0` are definitionally (intensionally) equal terms of type the natural numbers, and the first is merely an abbreviation for the second.

## Computational equality

For type theory important sort of equality is **computational equality** (conversional or reductional). This is the *congruence* on terms generated by various conversion or reduction rules, such as `∞-reduction` or `∞-conversion` (the choice of rules depends on the type theory).

An example of computational equality is a pair of terms `(λx.x+x)2` and `2+2`, where the second is obtained by β-reduction from the first.

In a type theory that includes definitions by recursion, expansion of a recursor is also computational equality. For instance, if addition is defined by recursion, then `2+2` (i.e. `SS0 + SS0`) reduces via this rule to `SSSS0` (i.e. to `4`).

For better or for worse, however, it is common in type theory to use the phrase "definitional equality" to include computational equality, even though it involves more than mere expansion of definitional abbreviations. There is even a phrase "δ-reduction" for the substitution of definitions regarded as a conversion rule analogous to β-reduction and η-expansion. Thus, even though "2+2" and "4" are not literally equal by definition but only by performing some computation (even if the computation is fairly trivial in this case), the type of equality they do enjoy is generally called definitional.

Perhaps this is because in type theory, computational equality plays the same role as true definitional equality. In particular, typing judgments respect it: if Γ⊢(t:A), while t and A are computationally equal to t' and A', then also Γ⊢(t':A'). For t and t', this fact is sometimes called type preservation and is an important provable aspect of a type theory. For A and A', the statement is generally only contentful in a dependent type theory, in which case it is often included explicitly as one of the typing rules.

Another apt word for computational equality is judgmental equality, since it is often expressed in type theory by a separate judgment: in addition to typing judgments Γ⊢(t:A), we have equality judgments Γ⊢(t=t'):A. The rules for manipulating such judgments then include reflexivity, symmetry, transitivity, and the generating computations such as β-reduction.

## Propositional equality

By contrast with "2+2" and "4", it is pretty much impossible to write down rules of computational equality such that the symbols "a+b" and "b+a" (in a context with free variables a and b for, say, natural numbers) become equal.

They are (only) extensionally equal, in the sense that they become computationally equal when any particular natural numbers are substituted for `a` and `b`.

An actual proof is necessary to demonstrate this equality in general: 
*it is not a definition but a theorem* that `a+b = b+a` 
for all natural numbers `a`, `b`.

With addition defined recursively on (e.g.) its first argument, this theorem must be proven by induction on `a` and is surprisingly nontrivial to formalize.

In type theory, *this extensional equality is a judgement*, not itself yet a proposition (an item in the formal system itself). It can be internalized, however, into a notion of equality called propositional equality, by introducing **identity types** (or **identity propositions**). 

Thus, `IdN(2+2,4)` is the type (proposition) that 2+2 is propositionally equal to 4, while `∏a,b:NIdN(a+b,b+a)` is the proposition that addition is commutative.

Exhibiting a term belonging to such a type is exhibiting (i.e. proving) such a propositonal equality.

The fact that **typing judgments respect computational/judgmental equality** means that if two terms `t`, `t'` are computationally/judgmentally equal, then they are also propositionally equal. This is because the type `Id(t,t)` is always inhabited by the reflexivity term `reflᵗ`, but then this term `reflᵗ` also inhabits the type `Id(t,t')`.

The converse, however, is not true in general. It is possible to add a rule to type theory saying that "if `Id(t,t')` is inhabited, then `t=t'` judgmentally". In this case, the adjectives "computational" and "definitional" sometimes used for judgmental equality truly lose their applicability.

This is a very strong way to make the type theory extensional type theory, but is often eschewed by type theorists because it makes type checking undecidable, because type checking has to respect judgmental equality, such a rule means that it also has to respect propositional equality, which in turn means that it has to be able to evaluate arbitrary functions defined inside of type theory.

## In set theory

Every set S has an equality relation, a binary relation according to which two elements x and y of S are related if and only if they are equal; in this case we write x=y. This is the smallest reflexive relation on S, and it is in fact an equivalence relation; it is the only equivalence relation on S that is also a partial order (although that fact is somewhat circular). This relation is often called the identity relation on S, either because 'identity' can mean 'equality' or because it is the identity for composition of relations.

In the category of reflexive relations on S, the equality relation on S is an initial reflexive relation; when the equality relation is a type family? instead of a family of propositions, then the equality relation is the initial type generated by reflexivity or the first law of thought.

As a subset of S×S, the equality relation is often called the diagonal and written ΔS or similarly. As an abstract set, this subset is isomorphic to S itself, so one also sees the diagonal as a map, the diagonal function S→ΔSS×S, which maps x to (x,x); note that x=x. This is in Set; analogous diagonal morphisms exist in any cartesian monoidal category.

In an axiomatic set theory? such as ZFC or ETCS, the presence of the equality relation is part of the axiomatization, although this is usually swept under the rug by including an equality relation by default in all first-order theories. (It has to be made more explicit in a structural set theory such as SEAR, where there is no equality relation on sets themselves, only on elements of a particular set.)

By contrast, in a definitional set theory?, an equality relation is structure which has to be put onto a type or preset in order to obtain a set. See for example setoid.
